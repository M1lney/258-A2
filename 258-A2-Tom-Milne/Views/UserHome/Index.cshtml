@model UserHomeViewModel

@{
    ViewData["Title"] = "Index";
    Layout = "_LayoutUser";
}
<head>
    <link rel="stylesheet" href="~/css/UserHomeStyle.css" asp-append-version="true" />
</head>
<div class="userhome-container">
        <div class="left-sidebar">
            <h4 id="project-header">Projects</h4>
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th>Title</th>
                        <th>Finish Date</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var project in Model.Projects)
                    {
                        <tr>
                            <td><a asp-action="ProjectDetails" asp-controller="UserHome" asp-route-projectId="@project.Id">@project.Title</a></td>
                
                            <td>@project.Date</td>
                            <td><a asp-action="Delete" asp-controller="Project" asp-route-id="@project.Id">Delete</a></td>
                        </tr>
                    }
                </tbody>
            </table>
            <a asp-action="Create" asp-controller="Project" class="btn btn-primary">Create New Project</a>
        </div>

        <!-- Center: Calendar (Placeholder) -->
        <div class="middle-section">
            <div id="calendar"></div>
        </div>

        
</div>
<script>
    function initializeCalendar() {
        document.addEventListener('DOMContentLoaded', function () {
            var calendarEl = document.getElementById('calendar');
            var events = [];

            @foreach (var project in Model.Projects)
            {
                @:events.push({
                @:    title: '@project.Title',
                @:    start: '@project.Date.ToString("yyyy-MM-dd")',
                @:    url: '@Url.Action("ProjectDetails", "UserHome")/' + @project.Id
                @:});
            }

            var calendar = new FullCalendar.Calendar(calendarEl, {
                initialView: 'dayGridMonth',
                events: events,
                eventClick: function (info) {
                    window.location = info.event.url;
                }
            });

            calendar.render();
        });
    }
</script>
<script>
    initializeCalendar();
</script>



